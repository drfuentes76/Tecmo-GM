
<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><title>Tecmo Super Bowl GM Mode</title></head>
<body style="background:#111;color:#0f0;font-family:sans-serif;">
<div id="newsTicker">GM Mode Active - ROM Patched</div>
<nav>
  <button onclick="show('gm')">GM Mode</button>
  <button onclick="show('play')">Play Game</button>
</nav>
<section id="gm" style="display:none;"><h2>GM Mode</h2><div id="gmContent"></div></section>
<section id="play" style="display:none;">
  <h2>Play Tecmo Super Bowl</h2>
  <canvas id="nes-canvas" width="256" height="240" style="border:1px solid #0f0;"></canvas>
</section>
<script src="https://unpkg.com/jsnes@0.8.0/dist/jsnes.min.js"></script>
<script>
let nes;
function show(section) {
  document.getElementById('gm').style.display = section === 'gm' ? 'block' : 'none';
  document.getElementById('play').style.display = section === 'play' ? 'block' : 'none';
  if (section === 'play') {
    fetch('TecmoSuperBowl_patched.nes').then(res => res.arrayBuffer()).then(data => {
      nes = new jsnes.NES({
        onFrame(buffer) {
          const canvas = document.getElementById("nes-canvas");
          const ctx = canvas.getContext("2d");
          const image = ctx.getImageData(0, 0, 256, 240);
          for (let i = 0; i < buffer.length; i++) image.data[i] = buffer[i];
          ctx.putImageData(image, 0, 0);
        }
      });
      nes.loadROM(String.fromCharCode(...new Uint8Array(data)));
      nes.start();
    });
  }
}
window.onload = () => {
  fetch("teams.json").then(res => res.json()).then(data => {
    const gm = document.getElementById("gmContent");
    gm.innerHTML = data.map(team => "<b>" + team.teamName + "</b><ul>" +
      team.players.map(p => "<li>" + p.name + " (" + p.position + ") SPD:" +
      p.speed + " PWR:" + p.power + " HP:" + p.hp + "</li>").join("") + "</ul>").join("<hr>");
  });
};
</script>
</body>
</html>
